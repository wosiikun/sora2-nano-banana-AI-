"""
提示词模板模块
"""

class PromptTemplates:
    
    @staticmethod
    def step1_template():
        """Step1: 生成文案生成提示词"""
        return """你是一个专业的AI提示词扩写专家和视频内容策略顾问。
你的任务是根据用户提供的简短、核心关键词指令，自动扩写并生成一个完整、详细且专业的**"AI剧情性视频文案生成提示词"**。

这个生成的提示词将用于指示另一个AI模型，让其创作出一段高度吸引人、充满剧情性和张力的视频文案。

你需要将用户指令中的元素，精确地映射并整合到以下提示词模板中。

[生成提示词模板开始]
你是一个专业的电影编剧、创意总监和科幻故事作家。
我需要你为一部短视频创作一个高度吸引人、充满剧情性和张力的视频文案。

视频核心要求：
主题： [根据用户指令中的主题（例如"未来主题"、"末世主题"）进行填充和扩写，加入相关关键词。如果用户未明确提供，默认填充"聚焦挑战与突破的宏大叙事"。]
时长： [根据用户指令中的时长（例如"15s"、"20s"）进行填充，并补充"内容紧凑，节奏明快"。]
主角： [根据用户指令中的"主角女/男"进行填充，并补充"他/她不是旁观者，而是故事的核心推动者和解决问题者。根据主题设定其具体身份（例如：科学家、领航员、幸存者等）"。]
配角： [根据用户指令中的"配角X个男/女/若干"进行填充。如果用户未明确提供，则默认为"不限，可由AI自行构思，以辅助主角推动剧情"。如果提供了具体数量和性别，请明确指出。]

剧情要素：
开端： 设定一个[根据主题扩写的]世界背景，并迅速引入一个突然降临的危机、挑战或困境。
发展： 展现主角如何面对危机，他/她的智慧、勇气和独特的技能是解决问题的关键。可以有与配角、AI或其他科技的互动。
高潮/抉择： 剧情推向高潮，主角面临一个关键性的抉择或行动，他/她的选择将决定成败。
结局： 危机得以解决，或者开辟了一个新的篇章，留下积极、充满希望或引人深思的结局。

语言风格： 电影化、富有画面感、扣人心弦、充满力量和史诗感。
目标： 激发观众的好奇心，展现[根据主题扩写的]世界的魅力与挑战，以及主角的非凡能力。

请直接给我这段剧情性的视频文案，只需要一大段，无需任何前言或解释。
[生成提示词模板结束]

请你根据我提供的以下简短关键词指令，生成上述完整的"AI剧情性视频文案生成提示词"。

我的简短关键词指令是： {theme}"""

    @staticmethod
    def step3_template(script, theme):
        """Step3: 生成基础分镜JSON"""
        return f"""你是一个专业的视频脚本策划师、分镜设计师、概念艺术家和AI提示词专家。
你的任务是根据用户提供的一段详细的视频文案和简短的视频设定关键词指令，直接创作并输出一个JSON格式的详细分镜脚本。

核心要求：
输出格式： 必须是标准的JSON数组，每个元素代表一个分镜片段。
时长划分： 视频总时长应严格按照用户指令，并将其划分为多个分镜片段，每个片段的建议时长不超过5秒。
角色构思： 在分镜描述中，你需要根据文案和设定，首次构思并详细描述主角和配角（如果存在）的形象、服装、气质等，以便后续图片生成。
内容提取： 从文案中提炼关键信息，并将其分散到对应的分镜片段中。

JSON结构要求：
每个分镜片段对象应包含以下字段：
"segment_id": (整数) 分镜片段的唯一ID，从1开始递增。
"time_range": (字符串) 该分镜片段的建议时间范围，例如 "0-5s"。
"edesc": 用于AI图片生成的高度详细提示词。应包含：
  人物（性别、年龄、种族、发型、服装、表情、姿态、位置、面向、动作、与场景中物体的具体互动）
  场景（环境细节、道具、建筑风格）
  光线（时间、类型、色彩）
  构图（远景、中景、特写）
  艺术风格（未来主义、科幻、电影感、写实、8k、高清）
  负面提示词无需包含。
"videodesc": (字符串) 基于edesc提炼出的，用于AI图生视频（或直接视频生成）的提示词。应侧重描述：
  画面中的关键动态元素（例如：人物走动、数据流动、屏幕闪烁、能量光束、雨滴、烟雾、摄像机运动）
  希望实现的视频效果（例如：缓慢推近、快速切换、粒子特效、光影变化）
  提示词要简洁有力，直指核心动态。
"cap": 分镜描述

请你根据我提供的以下视频文案和简短关键词指令，直接生成上述JSON格式的分镜脚本。只输出JSON数组，不要有任何其他文字。

我的视频文案是：
{script}

我的简短关键词指令是：
{theme}"""

    @staticmethod
    def step4_template(base_json):
        """Step4: 提取人物场景提示词"""
        return f"""你是一个专业的AI图像提示词专家和视频概念艺术总监。
你的任务是解析用户提供的JSON格式的分镜脚本，并从中识别出所有独立的人物角色和独立场景环境。

对于每个识别出的独立人物和独立场景，你需要生成一个高度详细、精准、富有电影感、具有独特美学并完美体现极简主义风格，且适合AI生成的图像提示词。

输出格式：
人物形象提示词：
[人物1名称]：
people: "[为人物1生成的通用生图提示词]"

[人物2名称]：
people: "[为人物2生成的通用生图提示词]"

场景环境提示词：
[场景1名称]：
local: "[为场景1生成的通用生图提示词]"
备注: "[场景说明]"

下面是分镜JSON：
{base_json}"""

    @staticmethod
    def step5_template(base_json, character_scene):
        """Step5: 生成完整分镜JSON"""
        return f"""你是一位资深电影摄影师和视觉叙事架构师。
你的任务是将用户提供的两份数据——原始分镜脚本和人物与场景通用提示词——整合并重构，生成一个全新的、高度电影化、视觉一致且可直接用于AI模型生成的分镜提示词JSON数组。

输出格式：
必须是标准的JSON数组，每个元素代表一个完整的分镜片段。每个分镜片段对象应包含以下字段：
"segment_id": (整数) 分镜片段的唯一ID
"time_range": (字符串) 时间范围
"edesc": (字符串) 分镜图合成提示词
"videodesc": (字符串) 图生视频提示词
"cap": (对象) 角色对话，格式如 {{"js1":"台词1","js2":"台词2"}}
"js": (字符串) 分镜出现的角色，如 "js1,js2"
"local": (字符串) 此分镜出现的场景

只输出JSON数组，不要有任何其他文字。

下面是原始分镜JSON：
{base_json}

下面是人物场景提示词：
{character_scene}"""